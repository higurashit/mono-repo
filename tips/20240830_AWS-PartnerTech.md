# 20240830_AWS-PartnerTech

## 生成 AI とビジネスインパクト

- AWS には 170 の事例と 69 の公開事例がある
- POC を超えた実績あるワークショップやプログラムのノウハウ
- 6 つのハイインパクト
  - データ読み取り
    - PDF、音声記録、メールからのデータ抽出を 40-90%効率化できる
    - 帳票 OCR よりも早く安く作ることができる（どうやって？？）
    - コールセンターの問い合わせを文字起こし＋生成 AI
    - TDnet から S3 に入れて、Streamlit アプリケーションで読み取り、チェックのみ（9 割）
    - 海外入札の英語理解
  - 対応スキル底上げ
    - 顧客対応
    - JP １対応
    - 専門ドキュメントの横断検索と回答
  - 営業支援
    - 日報の解析
    - 商談の要約作業
    - 膨大な情報リソースの所在不足 ※若手 2 人、2 ヶ月でできる
  - コンテンツ審査
    - 監査品質、模擬監査トレーニング
    - ガイドラインに紐づく審査
  - 検索性向上
    - EC の検索性向上
    - メール生成
    - 画像のタグ付け
  - 商材作成
    - 広報誌、機関誌の画像手配
    - 画像生成
    - 受発注者間の完成イメージ共有
- 生成 AI の導入
  - １生成 AI の利用基盤構築
  - ２社内業務への適用
  - ３対顧客、社外サービスへの適用
- 生成 AI 事例顧客の共通する点
  - 顧客起点文化　エンドユーザーがどれだけ改善したかを測っている
  - 小規模チーム　 1〜4 名
  - 頻繁な実験　 1 ヶ月〜3 ヶ月
  - ピープル（文化）、プロセスが整ってないと真似しても無駄
  - 社員の AI リテラシーが低いと阻害
  - IPA 　生成 AI 導入 ≒ クラウド導入企業、過去の技術
  - 3 ヶ月以内に効果を出さないと中断する
  - ガバナンスは DL 協会、セキュリティは AWS ベストプラクティス
  - 三回目には 9 割が期待以上の効果を得る
    → 導入時はステップ論
    小さい成果を広げる
- AWS の生成 AI プログラム
  - MLEW: 生成 AI を含めた技術をプロダクト成長につなげる
    - テキストは Github 公開されている
  - AWS の生成 AI 活用開始プログラム
    - ３ヶ月でのローンチが条件
  - 生成 AI 実用化推進プログラム
  - EBC 顧客起点
- 提案シナリオ
  - 6 つがどれくらいか
  - お客様の状況（顧客起点、チーム、頻繁）
  - シナリオ
    - 事例集、MLEW/EVC，GENU，業界特化サンプル、実用化プログラム

## 自社での生成 AI の活用

- 生成 AI は 75%がここで価値を生む
  - カスタマーオペレーション
  - マーケティング・営業
  - ソフトウェア開発
  - 商品開発、R＆D
- ソフトウェア開発における課題領域
  - 開発・テスト以外にも課題がある
  - コーディング支援ツール以外でも課題感がある
- ソフトウェア開発ライフサイクル
  - ソフトウェア開発ライフサイクル
  - 用件定義〜移行・保守まで
  - 情報整理、ストーリー作成、図の作成、説明文作成、コード生成、レビュー、計画作成、、、
- プロジェクトマネジメント全体
  - 文書作成、壁打ち役
  - タスク管理
  - コミュニケーション
  - データ分析
  - 知識共有
- 得られるもの
  - エンジニアの負荷低減、エンジニア不足の解消
  - 成果物の品質向上
  - 価値提供スピードの向上
- システム開発に活用できる AWS の生成 AI サービス
  - サービスに組み込み済み：Amazon Q
    - 開発者向けの Developer
      - Amazon Q Developer in the IDE with VSCode（Copilot である CodeWhisper 統合）
      - ブログに CodeWhisper のベストプラクティスがある
      - Java のバージョンアップ
        - AWS 事例：数万の本番稼働アプリケーションを Java17 に移行。1000 人以上、4500 年分節約、年間 2.6 億ドルのコスト削減
      - 無料版もあるので入れる
      - Python はすぐ
      - Java はこれ？IntelliJ IDEA 後にかな。
        - https://fuku-suku.com/archives/1050
        - https://community.aws/content/2bDjKsu3S6qxCMDnRTKg9N2FCnf/introduing
    - ビジネスユーザ向けの Business
      - 安全かつプライベートかつ迅速に回答を提供
      - 超お手軽な RAG かな？
    - App Studio（Preview in oregon）
      - ローコード開発サービス
  - Amazon Bedrock
    - 自サービスや顧客サービスへの組み込み
    - 基盤モデルがとてもたくさんある。
    - Claud3 Haiku, Claud3.5 Sonnet が日本語に大きく対応している
      - マルチモーダル機能（画像読み込み）もある
      - in: $0.00025~$0.003/1K tokens, out: $0.00125~$0.015/1K tokens
    - OSS の Bedrock Claude Chat でチャットアプリもすぐ利用可能
- システム開発での活用箇所
  - 上流工程〜実装：日本語が多いので、Amazon Bedrock の Claud3
  - 実装以降は Amazon Q Developer
  - プロジェクトマネジメント：Amazon Q Business、Bedrock
- 生成 AI 活用のステップ
  - Lv.1 個人レベル
    - プロンプトエンジニアリング（RAG なし）
  - Lv.2 知見の共有と標準化
    - プロンプトエンジニアリングの標準化（RAG なし）
    - ユースケース、ワークショップで考え方、使い方を理解する
    - ユースケース集を作成、公開
    - フィードバックを受けて更新する
  - Lv.2.5 開発プロセスの改善
    - 設計書を標準化しやすい形に変換（一部 RAG あり）
    - プロセス改善
    - ツール自動化
  - Lv.3 更なる高度化
    - 標準化した形に従って、設計書やソースコード、テストコードを作るツールの作成

## データベース移行（外部公開 NG）

- データベース移行プロセス
  - アセスメント
    - AWS と一緒に実施するプログラム、ワークショップ
    - AWS が全部やってしまうサービス
    - スキーマコンバージョンツール（SCT）
  - スキーマコンバージョン
    - スキーマコンバージョンツール（SCT）
  - コードコンバージョン
    - スキーマコンバージョンツール（SCT）
  - データマイグレーション
  - バリデーション
- スキーマコンバージョンツール（SCT）
  - 無償で使える
  - PostgreSQL で生成したものは各 DB 用に変えられる
  - Java ソース内の SQL も自動で変換できる
- Oracle から PostgreSQL への移行ノウハウ
  - Database Migration Playbook
  - from Oracle, SQLServer -> to PostgreSQL もある
  - DB エンジンの仕様差異
    - Null/空文字の明確な区別
    - トランザクションの仕様差異
      - PostgreSQL の Trancate はトランザクション内で使える
      - PostgreSQL はトランザクションエラー時に必ず全てロールバックされる
  - オブジェクトの仕様差異
    - マテリアライズドビュー：実体を持った View
    - PostgreSQL は完全リフレッシュ（全件作り直し）しか存在しないので負荷やパフォーマンスが下がる
    - 対応として、仮想マテビュー、Insert/Update/Delete トリガーを作成する
    - Oracle の桁数はバイト数（デフォルト）、PosgreSQL は文字数
    - Timestamp の仕様差異
  - アプリケーションの仕様差異
    - PostgreSQL は整数/整数の除算結果が、整数になる（1/3 -> 0）
    - PostgreSQL は小数を使う時も Numeric にすること（Float、Double は近似値になる）
    - PostgreSQL の substring 関数は第二引数にマイナスが使えない
    - PostgreSQL は暗黙の型変換でエラーになる（Oracle はうまいことやってくれちゃう）
  - PostgreSQL
    - 更新処理の大幅な遅延
      - Tips: generate_series でテストデータを大量に作れる
      - pg_stag_all_tables でボトルネックを特定する
      - n_tup_hot_upd の差がある -> HOT 更新が増えたため -> PG はページを全て使うため
      - FILFACTOR のデフォルトが 100 であり、ページ内に空き領域
      - n_tup_hot_upd が Max になるまで使えば、18 倍くらいのパフォーマンスになる
      - 代わりに、テーブルサイズが大きくなるので、更新頻度
    - 数値型のパフォーマンス
      - Numeric は内部的な桁数も多いため、INT や BIGINT の方がパフォーマンスが良い
      - 整数や区分値レベルのものは INT にすることでパフォーマンス改善できる

## AWS サポート（外部公開 NG）

- AWS サポートの概要
  - 年間 18 万件程度の日本語サポート
- 事例から学ぶ AWS サポートの役割と働き方
  - ファイル転送遅延
    - データセンタから DirectConnect で SCP で EC2（ファイルサーバ）に配信
    - EC2（ファイルサーバ）は NFS クライアントでもあり、NFS で EFS に接続
    - 上限系、設定は問題なし、おそらく仕様、OS 系
    - IO Wait の上昇が確認できた
    - EFS 標準 -> EFS IA（コストが最大 94%節約）
    - EFS への書き込みで IA へのアクセスが発生している原因が不明
    - IA にデータが入っている状態で、SCP コマンド経由で上書きをすると遅くなった。CP は大丈夫
    - SCP コマンドの場合、IA データを取り出してから上書きしていることが判明
- エンジニアの育成と制度
  - XY 問題を避ける（コミュニケーション問題）
  - 人は２次的な問題である Y を質問することが多い
  - 本質的な問題の理解が大事
  - ソリューションの網羅性を確保することも大事
- 今後の AWS サポートについて
  - AWS Support Automation Workflows（AWS SAW）
    - AWS サポートのよくある診断をスクリプト化
    - Systems Manager の Runbook として用意されている
    - まずはこの Runbook を使うのがよさそう

## AWS データセンタ（外部公開 NG）

- データセンタ運用チーム
- Who made who (AC/DC)
- 全世界のデータセンタで同じ仕組み、独自の最適化を進めている

## 学び

- グローバル＝生成 AI
- 見積もりのベース
  - フル CI/CD
  - フル IaC
  - ChatGPT pro ✖️ 人数分
  - Amazon Q Developer in the IDE with VSCode（Copilot である CodeWhisper 統合）✖️ 人数分
  - Bedrock の最低限のトークン ✖️ 人数分
- 取り組み
  - プロンプトエンジニアリング
    - ユースケース、ワークショップ（情報共有会で実施）
  - DB 関数の型化
    - ファンクションやプロシージャを PostgreSQL で作成、無償変換、公開
    - PostgreSQL では generate_series でテストデータを大量に作れる
  - intra-mart
    - TableMaintenance への Check 制約追加
  - JMDM 高速化
  - 開発環境の Docker 化
- 改善
  - 対面の代わりに、フルリモート会議
- ビジプラ
  - 生成 AI 提案ストーリー
  - 値付けには機能拡張の費用も含める
